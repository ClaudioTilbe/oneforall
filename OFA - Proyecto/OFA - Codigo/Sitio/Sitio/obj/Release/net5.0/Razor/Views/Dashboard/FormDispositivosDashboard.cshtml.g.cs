#pragma checksum "E:\OFA - Github\OFA - Codigo\Sitio\Sitio\Views\Dashboard\FormDispositivosDashboard.cshtml" "{8829d00f-11b8-4213-878b-770e8597ac16}" "c5dc8ebd5cfca0e981a2b76ea73a9d3a8f7361baf8500b5fcfa0d2822a048fd5"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Dashboard_FormDispositivosDashboard), @"mvc.1.0.view", @"/Views/Dashboard/FormDispositivosDashboard.cshtml")]
namespace AspNetCore
{
    #line hidden
    using global::System;
    using global::System.Collections.Generic;
    using global::System.Linq;
    using global::System.Threading.Tasks;
    using global::Microsoft.AspNetCore.Mvc;
    using global::Microsoft.AspNetCore.Mvc.Rendering;
    using global::Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "E:\OFA - Github\OFA - Codigo\Sitio\Sitio\Views\_ViewImports.cshtml"
using Sitio;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "E:\OFA - Github\OFA - Codigo\Sitio\Sitio\Views\_ViewImports.cshtml"
using Sitio.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "E:\OFA - Github\OFA - Codigo\Sitio\Sitio\Views\Dashboard\FormDispositivosDashboard.cshtml"
using Microsoft.AspNetCore.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "E:\OFA - Github\OFA - Codigo\Sitio\Sitio\Views\Dashboard\FormDispositivosDashboard.cshtml"
using Sitio.Utility;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"Sha256", @"c5dc8ebd5cfca0e981a2b76ea73a9d3a8f7361baf8500b5fcfa0d2822a048fd5", @"/Views/Dashboard/FormDispositivosDashboard.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"Sha256", @"1867eecf72bc49bbadb2a39887fae6872f0611a2f9b918e03aa97fb8f3cdbdb3", @"/Views/_ViewImports.cshtml")]
    #nullable restore
    public class Views_Dashboard_FormDispositivosDashboard : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<dynamic>
    #nullable disable
    {
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_0 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("src", new global::Microsoft.AspNetCore.Html.HtmlString("~/js/estandar.js"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        #line hidden
        #pragma warning disable 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext __tagHelperExecutionContext;
        #pragma warning restore 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner __tagHelperRunner = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner();
        #pragma warning disable 0169
        private string __tagHelperStringValueBuffer;
        #pragma warning restore 0169
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __backed__tagHelperScopeManager = null;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __tagHelperScopeManager
        {
            get
            {
                if (__backed__tagHelperScopeManager == null)
                {
                    __backed__tagHelperScopeManager = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager(StartTagHelperWritingScope, EndTagHelperWritingScope);
                }
                return __backed__tagHelperScopeManager;
            }
        }
        private global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper;
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            WriteLiteral("\r\n");
            WriteLiteral(" ");
            WriteLiteral("\r\n\r\n");
#nullable restore
#line 8 "E:\OFA - Github\OFA - Codigo\Sitio\Sitio\Views\Dashboard\FormDispositivosDashboard.cshtml"
  
    ViewBag.Title = "Dashboard";

    var UsuarioLogueado = Accessor.HttpContext.Session.GetObjectFromJson<Usuario>("UsuarioLog");

    Layout = LayoutForViewHelper.GetLayoutForView(UsuarioLogueado);





    List<Dispositivo> listaDispositivos = Accessor.HttpContext.Session.GetObjectFromJson<List<Dispositivo>>("listaDispositivos");

    List<List<Dispositivo>> listaFiltradaXSucursal = listaDispositivos
                            .GroupBy(d => new
                            {
                                NumeroSucursal = d.UbSucursal.NroSucursal
                            })
                            .Select(g => g.ToList())
                            .ToList();

    List<List<Tuple<string, int>>> matrizCategorizada = new List<List<Tuple<string, int>>>();

    for (int i = 0; i < listaFiltradaXSucursal.Count; i++)
    {
        //Comienzo a Categorizarlos
        List<Tuple<string, int>> listaResultados = new List<Tuple<string, int>>();

        //Conectados ----------------------------------------------------------------------
        int conectados = (from unDisp in listaFiltradaXSucursal[i]
                          where unDisp.Conectado == true
                          select unDisp).Count();

        listaResultados.Add(new Tuple<string, int>("Conectados", conectados));

        //Criticos ------------------------------------------------------------------------
        int criticos = (from unDisp in listaFiltradaXSucursal[i]
                        where unDisp.Conectado == false && unDisp.Permanencia == true
                        select unDisp).Count();

        listaResultados.Add(new Tuple<string, int>("Criticos", criticos));

        //Alerta ---------------------------------------------------------------------------
        int alerta = (from unDisp in listaFiltradaXSucursal[i]
                      where unDisp.Conectado == false && unDisp.Permanencia == false
                      select unDisp).Count();

        listaResultados.Add(new Tuple<string, int>("Alerta", alerta));

        // //Desconocidos ---------------------------------------------------------------------
        // int desconocidos = (from unDisp in listaFiltradaXSucursal[i]
        //                     where unDisp.Nombre == "Desconocido"
        //                     select unDisp).Count();

        // listaResultados.Add(new Tuple<string, int>("Desconocidos", desconocidos));

        matrizCategorizada.Add(listaResultados);

    }






    //CODIGO PARA DASHBOARD GENERAL ===================================================================================


    //Comienzo a Categorizarlos
    List<Tuple<string, int>> listaResultadosGeneral = new List<Tuple<string, int>>();

    //Conectados ----------------------------------------------------------------------
    int conectadosGeneral = (from unDisp in listaDispositivos
                              where unDisp.Conectado == true
                              select unDisp).Count();

    listaResultadosGeneral.Add(new Tuple<string, int>("Conectados", conectadosGeneral));

    //Criticos ------------------------------------------------------------------------
    int criticosGeneral = (from unDisp in listaDispositivos
                            where unDisp.Conectado == false && unDisp.Permanencia == true
                            select unDisp).Count();

    listaResultadosGeneral.Add(new Tuple<string, int>("Criticos", criticosGeneral));

    //Alerta ---------------------------------------------------------------------------
    int alertaGeneral = (from unDisp in listaDispositivos
                          where unDisp.Conectado == false && unDisp.Permanencia == false
                          select unDisp).Count();

    listaResultadosGeneral.Add(new Tuple<string, int>("Alerta", alertaGeneral));

    //Desconocidos ---------------------------------------------------------------------
    int desconocidosGeneral = (from unDisp in listaDispositivos
                                where unDisp.Nombre == "Desconocido"
                                select unDisp).Count();

    listaResultadosGeneral.Add(new Tuple<string, int>("Desconocidos", desconocidosGeneral));

    //Todos ----------------------------------------------------------------------------
    listaResultadosGeneral.Add(new Tuple<string, int>("Todos", listaDispositivos.Count()));


#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n\r\n\r\n\r\n<div class=\"row mb-3\">\r\n    <div class=\"col-6\">\r\n        <h2 class=\"font-weight-bold\">Visualizacion de Dashboard</h2>\r\n    </div>\r\n\r\n</div>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n");
#nullable restore
#line 133 "E:\OFA - Github\OFA - Codigo\Sitio\Sitio\Views\Dashboard\FormDispositivosDashboard.cshtml"
 if (listaDispositivos == null || listaDispositivos.Count <= 0)
{
    

#line default
#line hidden
#nullable disable
#nullable restore
#line 136 "E:\OFA - Github\OFA - Codigo\Sitio\Sitio\Views\Dashboard\FormDispositivosDashboard.cshtml"
                                                              
}
else
{
    

#line default
#line hidden
#nullable disable
            WriteLiteral(@"    <div class=""row border border-success mb-2"">

        <div class=""col-12 col-md-6 dashboard-row"">
            <canvas id=""prioridadesGeneralChart"" class=""p-3"" width=""300"" height=""150""></canvas>
        </div>

        <div class=""col-12 col-md-6"">
            <!-- Puedes agregar contenido adicional para cada grÃ¡fico si es necesario -->
");
            WriteLiteral("\r\n            <div class=\"m-4\">\r\n                <h3><strong>TOTAL DE DISPOSITIVOS</strong></h3>\r\n\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n");
#nullable restore
#line 164 "E:\OFA - Github\OFA - Codigo\Sitio\Sitio\Views\Dashboard\FormDispositivosDashboard.cshtml"
     for (int i = 0; i < matrizCategorizada.Count; i++)
    {

#line default
#line hidden
#nullable disable
            WriteLiteral("        <div class=\"row border mb-2\">\r\n\r\n            <div class=\"col-12 col-md-6 dashboard-row\">\r\n                <canvas");
            BeginWriteAttribute("id", " id=\"", 6228, "\"", 6252, 2);
            WriteAttributeValue("", 6233, "prioridadesChart_", 6233, 17, true);
#nullable restore
#line 169 "E:\OFA - Github\OFA - Codigo\Sitio\Sitio\Views\Dashboard\FormDispositivosDashboard.cshtml"
WriteAttributeValue("", 6250, i, 6250, 2, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(" class=\"p-3\" width=\"300\" height=\"150\"></canvas>\r\n            </div>\r\n\r\n            <div class=\"col-12 col-md-6\">\r\n                <!-- Puedes agregar contenido adicional para cada grÃ¡fico si es necesario -->\r\n");
            WriteLiteral("\r\n                <div class=\"m-4\">\r\n                    <h3><strong>SUCURSAL NUMERO </strong> ");
#nullable restore
#line 177 "E:\OFA - Github\OFA - Codigo\Sitio\Sitio\Views\Dashboard\FormDispositivosDashboard.cshtml"
                                                     Write(listaFiltradaXSucursal[i][0].UbSucursal.NroSucursal.ToString());

#line default
#line hidden
#nullable disable
            WriteLiteral("</h3>\r\n                    <h5 class=\"text-muted\"><strong>Calle:</strong> ");
#nullable restore
#line 178 "E:\OFA - Github\OFA - Codigo\Sitio\Sitio\Views\Dashboard\FormDispositivosDashboard.cshtml"
                                                              Write(listaFiltradaXSucursal[i][0].UbSucursal.Calle);

#line default
#line hidden
#nullable disable
            WriteLiteral("</h5>\r\n                    <h5 class=\"text-muted\"><strong>Tipo:</strong> ");
#nullable restore
#line 179 "E:\OFA - Github\OFA - Codigo\Sitio\Sitio\Views\Dashboard\FormDispositivosDashboard.cshtml"
                                                             Write(listaFiltradaXSucursal[i][0].UbSucursal.Tipo);

#line default
#line hidden
#nullable disable
            WriteLiteral("</h5>\r\n                    <h5 class=\"text-muted\"><strong>Numero local:</strong> ");
#nullable restore
#line 180 "E:\OFA - Github\OFA - Codigo\Sitio\Sitio\Views\Dashboard\FormDispositivosDashboard.cshtml"
                                                                     Write(listaFiltradaXSucursal[i][0].UbSucursal.NumeroLocal);

#line default
#line hidden
#nullable disable
            WriteLiteral("</h5>\r\n\r\n                    <h5 class=\"text-muted\"><strong>Subredes:</strong>\r\n");
#nullable restore
#line 183 "E:\OFA - Github\OFA - Codigo\Sitio\Sitio\Views\Dashboard\FormDispositivosDashboard.cshtml"
                         if (listaFiltradaXSucursal[i][0].UbSucursal.ListaSubred.Count == 0)
                        {

#line default
#line hidden
#nullable disable
            WriteLiteral("                           <span>Sin subredes asignadas</span>\r\n");
#nullable restore
#line 186 "E:\OFA - Github\OFA - Codigo\Sitio\Sitio\Views\Dashboard\FormDispositivosDashboard.cshtml"
                        }
                        else
                        {
                            

#line default
#line hidden
#nullable disable
#nullable restore
#line 189 "E:\OFA - Github\OFA - Codigo\Sitio\Sitio\Views\Dashboard\FormDispositivosDashboard.cshtml"
                             for (int j = 0; j < listaFiltradaXSucursal[i][0].UbSucursal.ListaSubred.Count; j++)
                            {

#line default
#line hidden
#nullable disable
            WriteLiteral("                                <span>");
#nullable restore
#line 191 "E:\OFA - Github\OFA - Codigo\Sitio\Sitio\Views\Dashboard\FormDispositivosDashboard.cshtml"
                                 Write(listaFiltradaXSucursal[i][0].UbSucursal.ListaSubred[j].Rango);

#line default
#line hidden
#nullable disable
            WriteLiteral("</span>\r\n");
#nullable restore
#line 193 "E:\OFA - Github\OFA - Codigo\Sitio\Sitio\Views\Dashboard\FormDispositivosDashboard.cshtml"
                                 if (j < listaFiltradaXSucursal[i][0].UbSucursal.ListaSubred.Count - 1)
                                {

#line default
#line hidden
#nullable disable
            WriteLiteral("                                    <span>,</span>\r\n");
#nullable restore
#line 196 "E:\OFA - Github\OFA - Codigo\Sitio\Sitio\Views\Dashboard\FormDispositivosDashboard.cshtml"
                                }

#line default
#line hidden
#nullable disable
#nullable restore
#line 196 "E:\OFA - Github\OFA - Codigo\Sitio\Sitio\Views\Dashboard\FormDispositivosDashboard.cshtml"
                                 
                            }

#line default
#line hidden
#nullable disable
#nullable restore
#line 197 "E:\OFA - Github\OFA - Codigo\Sitio\Sitio\Views\Dashboard\FormDispositivosDashboard.cshtml"
                             
                        }

#line default
#line hidden
#nullable disable
            WriteLiteral("                    </h5>\r\n\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n");
            WriteLiteral("        <script>\r\n            //DASHBOARD LISTADO SCRIPT ===============================================================================\r\n\r\n            var ctx_");
#nullable restore
#line 213 "E:\OFA - Github\OFA - Codigo\Sitio\Sitio\Views\Dashboard\FormDispositivosDashboard.cshtml"
               Write(i);

#line default
#line hidden
#nullable disable
            WriteLiteral(" = document.getElementById(\'prioridadesChart_");
#nullable restore
#line 213 "E:\OFA - Github\OFA - Codigo\Sitio\Sitio\Views\Dashboard\FormDispositivosDashboard.cshtml"
                                                              Write(i);

#line default
#line hidden
#nullable disable
            WriteLiteral("\').getContext(\'2d\');\r\n            var myChart_");
#nullable restore
#line 214 "E:\OFA - Github\OFA - Codigo\Sitio\Sitio\Views\Dashboard\FormDispositivosDashboard.cshtml"
                   Write(i);

#line default
#line hidden
#nullable disable
            WriteLiteral(" = new Chart(ctx_");
#nullable restore
#line 214 "E:\OFA - Github\OFA - Codigo\Sitio\Sitio\Views\Dashboard\FormDispositivosDashboard.cshtml"
                                      Write(i);

#line default
#line hidden
#nullable disable
            WriteLiteral(", {\r\n                type: \'doughnut\',\r\n                data: {\r\n                    labels: ");
#nullable restore
#line 217 "E:\OFA - Github\OFA - Codigo\Sitio\Sitio\Views\Dashboard\FormDispositivosDashboard.cshtml"
                       Write(Html.Raw(Json.Serialize(matrizCategorizada[i].Select(x => x.Item1))));

#line default
#line hidden
#nullable disable
            WriteLiteral(",\r\n                    datasets: [{\r\n                        data: ");
#nullable restore
#line 219 "E:\OFA - Github\OFA - Codigo\Sitio\Sitio\Views\Dashboard\FormDispositivosDashboard.cshtml"
                         Write(Html.Raw(Json.Serialize(matrizCategorizada[i].Select(x => x.Item2))));

#line default
#line hidden
#nullable disable
            WriteLiteral(@",

                        backgroundColor: [

                            'rgba(102, 207, 122, 1)',
                            'rgba(255, 113, 127, 1)',
                            'rgba(228, 202, 44, 1)'
                        ],

                        borderColor: [
                            'rgba(255, 255, 255, 1)'
                        ],

                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    legend: {
                        position: 'right'
                    }
                }
            });
        </script>
");
#nullable restore
#line 244 "E:\OFA - Github\OFA - Codigo\Sitio\Sitio\Views\Dashboard\FormDispositivosDashboard.cshtml"
    }

#line default
#line hidden
#nullable disable
            WriteLiteral(@"      <script>
        //DASHBOARD GENERAL SCRIPT ===============================================================================
        var ctxGeneral = document.getElementById('prioridadesGeneralChart').getContext('2d');
        var myChartGeneral = new Chart(ctxGeneral, {
            type: 'bar',
            data: {
                labels: ");
#nullable restore
#line 254 "E:\OFA - Github\OFA - Codigo\Sitio\Sitio\Views\Dashboard\FormDispositivosDashboard.cshtml"
                   Write(Html.Raw(Json.Serialize(listaResultadosGeneral.Select(x => x.Item1))));

#line default
#line hidden
#nullable disable
            WriteLiteral(",\r\n                datasets: [{\r\n                    data: ");
#nullable restore
#line 256 "E:\OFA - Github\OFA - Codigo\Sitio\Sitio\Views\Dashboard\FormDispositivosDashboard.cshtml"
                     Write(Html.Raw(Json.Serialize(listaResultadosGeneral.Select(x => x.Item2))));

#line default
#line hidden
#nullable disable
            WriteLiteral(@",

                    backgroundColor: [
                        'rgba(102, 207, 122, 1)',
                        'rgba(255, 113, 127, 1)',
                        'rgba(228, 202, 44, 1)',
                        'rgba(185, 185, 185, 1)',
                        'rgba(97, 160, 252, 1)'
                    ],
                    borderColor: 'rgba(255, 255, 255, 1)',
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    legend: {
                        display: false
                    }
                }
            }
        });
    </script>   
");
#nullable restore
#line 280 "E:\OFA - Github\OFA - Codigo\Sitio\Sitio\Views\Dashboard\FormDispositivosDashboard.cshtml"



}

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n");
#nullable restore
#line 285 "E:\OFA - Github\OFA - Codigo\Sitio\Sitio\Views\Dashboard\FormDispositivosDashboard.cshtml"
 if (!string.IsNullOrEmpty(@ViewBag.Mensaje))
{

#line default
#line hidden
#nullable disable
            WriteLiteral("    <div class=\"row\">\r\n        <div class=\"alert alert-primary col-12\" role=\"alert\">\r\n            ");
#nullable restore
#line 289 "E:\OFA - Github\OFA - Codigo\Sitio\Sitio\Views\Dashboard\FormDispositivosDashboard.cshtml"
       Write(ViewBag.Mensaje);

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n        </div>\r\n    </div>\r\n");
#nullable restore
#line 292 "E:\OFA - Github\OFA - Codigo\Sitio\Sitio\Views\Dashboard\FormDispositivosDashboard.cshtml"
}

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n\r\n\r\n");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("script", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "c5dc8ebd5cfca0e981a2b76ea73a9d3a8f7361baf8500b5fcfa0d2822a048fd521409", async() => {
            }
            );
            __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_0);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral("\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n");
        }
        #pragma warning restore 1998
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public IHttpContextAccessor Accessor { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<dynamic> Html { get; private set; } = default!;
        #nullable disable
    }
}
#pragma warning restore 1591
